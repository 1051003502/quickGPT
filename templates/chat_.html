<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GPT Chatbot</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/plugins/bootstrap-3.4.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../static/plugins/fontawesome-free-5.15.4-web/css/all.css">
    <style>

        body {
            background-color: #f1f1f1;
            font-family: 'Lato', sans-serif;
        }


        .message p {
            margin: 0;
            font-size: 16px;
            line-height: 1.5;
            padding: 10px;
            border-radius: 5px;
            position: relative;
            max-width: 70%;
            word-wrap: break-word;
        }


        /*.form-control {*/
        /*    height: 50px;*/
        /*    font-size: 16px;*/
        /*    border-radius: 5px;*/
        /*    border: none;*/
        /*}*/


        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }

    </style>
</head>
<body>
<nav class="navbar navbar-default" style="margin-bottom: 0">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/quickgpt/index">QuickGPT</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="#">介绍 <span class="sr-only">(current)</span></a></li>
                <li><a href="#">充值</a></li>
                <li><a href="#">联系我们</a></li>
                <li><a href="#">加入我们</a></li>
                <!--                <li class="dropdown">-->
                <!--                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"-->
                <!--                       aria-expanded="false">Dropdown <span class="caret"></span></a>-->
                <!--                    <ul class="dropdown-menu">-->
                <!--                        <li><a href="#">Action</a></li>-->
                <!--                        <li><a href="#">Another action</a></li>-->
                <!--                        <li><a href="#">Something else here</a></li>-->
                <!--                        <li role="separator" class="divider"></li>-->
                <!--                        <li><a href="#">Separated link</a></li>-->
                <!--                        <li role="separator" class="divider"></li>-->
                <!--                        <li><a href="#">One more separated link</a></li>-->
                <!--                    </ul>-->
                <!--                </li>-->
            </ul>
            <form class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="寻找应用">
                </div>
                <button type="submit" class="btn btn-default">搜索</button>
            </form>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">Link</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">我的 <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                    </ul>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>


<script src="../static/js/jquery-3.6.4.js"></script>
<script src="../static/plugins/bootstrap-3.4.1-dist/js/bootstrap.min.js"></script>
<script>
    function sendMessage() {
        var userMessage = $('#user-message').val();
        if (userMessage.trim() === '') {
            return;
        }
        $('#chat-box').append('<p><strong>我:</strong> ' + userMessage + '</p>');
        $('#user-message').val('');
        $.ajax({
            type: 'POST',
            url: '/api/chat',
            data: {'user_message': userMessage},
            success: function (response) {
                var botMessage = response.bot_message;
                $('#chat-box').append('<p><strong>机器人:</strong> ' + botMessage + '</p>');
            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    $(document).ready(function () {
        $('#user-message').focus();
    });

    $(document).keypress(function (e) {
        if (e.which === 13) {
            sendMessage();
        }
    });

</script>

</body>
</html>